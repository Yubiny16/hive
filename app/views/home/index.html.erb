<h1>Home Page</h1>
<!-- Header -->
<ul class="nav nav-pills">
  <li role="presentation" class="active"><a href="/home/index">Home</a></li>
  <li role="presentation"><a href="/home/profile">Profile</a></li>
  <li role="presentation"><a href="/home/my_friends">Friends</a></li>
  <li role="presentation"><a href="/rooms/show">Chat</a></li>
  <li role="presentation"><a href="/users/edit">Setting</a></li>
  <li role="presentation"><a href="/users/sign_out">Log Out</a></li>
</ul>
Welcome to Hive, <%= @user.first_name %>!
<br>
<!-- Search Group -->
<form action= "/home/search" method="post">
  <!-- Pass search words to controller -->
  <input name= "search_group" type="text" class="form-control" placeholder="Search Your Group">
  <button type="submit" class="btn btn-default">Search!</button>
</form>
 <div>
   <!-- User inputs search words -->
   <% Group.where("name LIKE ?", "%#{@search}%").find_each do |g| %>
   <!-- Looks for already joined groups -->
   <% if GroupUser.where(group_id: g.id, user_id: @user.id).exists? %>
     <h4>Already Joined <%= g.name %></h4>
   <% else %>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#join_button_<%= g.id %>"><%= g.name %></button>
    <!-- Create modal for each group -->
    <div class="modal fade" id="join_button_<%= g.id %>" tableindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h5 class="modal-title"><%= g.name %></h5>
          </div>
          <div class="modal-body">
            <input name= "group_pw" type="text" class="form-control" placeholder="Type in Password for this Group to Join">
          </div>
          <!-- Join Group -->
          <div class="modal-footer">
            <a href = "/home/join_group/<%= g.id %>">Join</a>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <% end %>
  <% end %>
 </div>
</form>
<!-- Create Group -->
<form action= "/home/create_group_view" method="get">
  <button>Create Group!<button>
</form>

<!-- Display Current User's Groups-->
<div>
  <% GroupUser.where(user_id: @user.id).find_each do |g| %>
    <%= Group.where(id: g.group_id).find_each do |gp| %>
      <button><a href="/home/group_page/<%= gp.id %>"><%= gp.name %></a></button>
    <% end %>
  <% end %>
</div>

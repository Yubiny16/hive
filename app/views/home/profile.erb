<!-- Header -->
<nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <a class="navbar-brand" href="/home/index">Brand</a>
    <ul class="nav navbar-nav nav-icons">
      <li class="current"><a href="/home/profile"><i class="fa fa-user fa-2x" aria-hidden="true"></i><span class="sr-only">(current)</span></a></li>
      <li><a href="/home/my_friends"><i class="fa fa-users fa-2x" aria-hidden="true"></i></a></li>
      <li><a href="/rooms/show"><i class="fa fa-comments-o fa-2x" aria-hidden="true"></i></a></li>
      <li><a href="/users/edit"><i class="fa fa-cog fa-2x" aria-hidden="true"></i></a></li>
      <li><a href="/users/sign_out"><i class="fa fa-sign-out fa-2x" aria-hidden="true"></i></a></li>
    </ul>
  </div>
</nav>
<br><br><br><br>

<ul class ="nav nav-pills nav-justified">
  <li class="active" id="profile-tab"><a href="#profile" data-toggle="tab">Profile</a></li>
  <li id="preferences-tab"><a href="#preferences" data-toggle="tab">Preferences</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="profile">
    <div class="container">
      <div class="user-prof-positioning">
        <div class="orientation-correcter">
          <div class="hex">
            <div>
              <% unless @user.image_url.nil? %>
                <img src="<%= @user.image_url %>" alt="profile img">
              <% end %>
            </div>
          </div>
        </div>
      </div>
      <form action="/uploadprofpic" method="POST" enctype="multipart/form-data" class="profile-pic-update-form">
        <input type="file" name="pic" accept="image/*">
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      <!--profile box-->
      <div class="profile-content">
        <a href="/users/edit"><i class="fa fa-pencil-square-o fa-2x" aria-hidden="true"></i></a>
        <p>
          <%= @user.first_name %>
          <%= @user.last_name %>
        </p>
        <p><%= @user.email %></p>
        <p><%= @user.school %></p>
        <p><%= @user.major %></p>
        <p>Class of <%= @user.class_year %></p>
        <!-- Company: <%= @user.company %> <br> removed for now. will add back in the future-->
      </div>
    </div><!--container-->
  </div><!--profile tab-->

  <div class="tab-pane" id="preferences">
    <% @current_group_user.each do |group_user| %>
      <ul><%= Group.find(group_user.group_id).name %><div class="circle_<%= group_user.color %> my_color"></div></ul>
        <div class="change_color">
          <div class="circle_black" data-groupid ="<%= group_user.group_id %>"></div>
          <div class="circle_blue" data-groupid ="<%= group_user.group_id %>"></div>
          <div class="circle_red" data-groupid ="<%= group_user.group_id %>"></div>
          <div class="circle_green" data-groupid ="<%= group_user.group_id %>"></div>

          <!--group_id used in script-->
          <input class="group_id" type="hidden" value="<%= group_user.group_id %>"/>
        </div>
    <% end %>
  </div><!--preferences tab-->
</div><!--tab content-->

<script>
//Change group_color to blue
$(function() {
  $('.change_color .circle_blue').click(function(){
    var new_color = "blue";
    var group_id = this.getAttribute("data-groupid");

    $.ajax({
      method: "POST",
      url: '/home/group_color',
      data: { new_color: new_color,
              group_id: group_id }

    }).done(function() {

    });

  });
});
//Change group_color to black
$(function() {
  $('.change_color .circle_black').click(function(){
    var new_color = "black";
    var group_id = this.getAttribute("data-groupid");

    $.ajax({
      method: "POST",
      url: '/home/group_color',
      data: { new_color: new_color,
              group_id: group_id }

    }).done(function() {

    });

  });
});

//Change group_color to red
$(function() {
  $('.change_color .circle_red').click(function(){
    var new_color = "red";
    var group_id = this.getAttribute("data-groupid");

    $.ajax({
      method: "POST",
      url: '/home/group_color',
      data: { new_color: new_color,
              group_id: group_id }

    }).done(function() {

    });

  });
});

//Change group_color to green
$(function() {
  $('.change_color .circle_green').click(function(){
    var new_color = "green";
    var group_id = this.getAttribute("data-groupid");

    $.ajax({
      method: "POST",
      url: '/home/group_color',
      data: { new_color: new_color,
              group_id: group_id }

    }).done(function() {
      
    });

  });
});
</script>
